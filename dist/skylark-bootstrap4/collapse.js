/**
 * skylark-bootstrap4 - The skylark bootstrap4 component library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-bootstrap4/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/query","skylark-utils-dom/eventer","skylark-utils-dom/plugins","./bs4","./util"],function(e,t,s,n,i,l){"use strict";const r="collapse",a="4.1.3",o="bs.collapse",g=`.${o}`,c=t.fn[r],h={toggle:!0,parent:""},_={toggle:"boolean",parent:"(string|element)"},d={SHOW:`show${g}`,SHOWN:`shown${g}`,HIDE:`hide${g}`,HIDDEN:`hidden${g}`,CLICK_DATA_API:`click${g}.data-api`},m={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},u={WIDTH:"width",HEIGHT:"height"},f={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'};class A{constructor(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll(`[data-toggle="collapse"][href="#${e.id}"],`+`[data-toggle="collapse"][data-target="#${e.id}"]`));const s=[].slice.call(document.querySelectorAll(f.DATA_TOGGLE));for(let t=0,n=s.length;t<n;t++){const n=s[t],i=l.getSelectorFromElement(n),r=[].slice.call(document.querySelectorAll(i)).filter(t=>t===e);null!==i&&r.length>0&&(this._selector=i,this._triggerArray.push(n))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get VERSION(){return a}static get Default(){return h}toggle(){t(this._element).hasClass(m.SHOW)?this.hide():this.show()}show(){if(this._isTransitioning||t(this._element).hasClass(m.SHOW))return;let e,n;if(this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(f.ACTIVES)).filter(e=>"string"==typeof this._config.parent?e.getAttribute("data-parent")===this._config.parent:e.classList.contains(m.COLLAPSE))).length&&(e=null),e&&(n=t(e).not(this._selector).data(o))&&n._isTransitioning)return;const i=s.create(d.SHOW);if(t(this._element).trigger(i),i.isDefaultPrevented())return;e&&(A._jqueryInterface.call(t(e).not(this._selector),"hide"),n||t(e).data(o,null));const r=this._getDimension();t(this._element).removeClass(m.COLLAPSE).addClass(m.COLLAPSING),this._element.style[r]=0,this._triggerArray.length&&t(this._triggerArray).removeClass(m.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);const a=`scroll${r[0].toUpperCase()+r.slice(1)}`,g=l.getTransitionDurationFromElement(this._element);t(this._element).one(l.TRANSITION_END,()=>{t(this._element).removeClass(m.COLLAPSING).addClass(m.COLLAPSE).addClass(m.SHOW),this._element.style[r]="",this.setTransitioning(!1),t(this._element).trigger(d.SHOWN)}).emulateTransitionEnd(g),this._element.style[r]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!t(this._element).hasClass(m.SHOW))return;const e=s.create(d.HIDE);if(t(this._element).trigger(e),e.isDefaultPrevented())return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,l.reflow(this._element),t(this._element).addClass(m.COLLAPSING).removeClass(m.COLLAPSE).removeClass(m.SHOW);const i=this._triggerArray.length;if(i>0)for(let e=0;e<i;e++){const s=this._triggerArray[e],n=l.getSelectorFromElement(s);if(null!==n){t([].slice.call(document.querySelectorAll(n))).hasClass(m.SHOW)||t(s).addClass(m.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);this._element.style[n]="";const r=l.getTransitionDurationFromElement(this._element);t(this._element).one(l.TRANSITION_END,()=>{this.setTransitioning(!1),t(this._element).removeClass(m.COLLAPSING).addClass(m.COLLAPSE).trigger(d.HIDDEN)}).emulateTransitionEnd(r)}setTransitioning(e){this._isTransitioning=e}dispose(){t.removeData(this._element,o),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(t){return(t=e.mixin({},h,t)).toggle=Boolean(t.toggle),l.typeCheckConfig(r,t,_),t}_getDimension(){return t(this._element).hasClass(u.WIDTH)?u.WIDTH:u.HEIGHT}_getParent(){let e;l.isElement(this._config.parent)?(e=this._config.parent,typeof this._config.parent.skylark-utils-dom/query!=="undefined"&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent);const s=`[data-toggle="collapse"][data-parent="${this._config.parent}"]`,n=[].slice.call(e.querySelectorAll(s));return t(n).each((e,t)=>{this._addAriaAndCollapsedClass(A._getTargetFromElement(t),[t])}),e}_addAriaAndCollapsedClass(e,s){const n=t(e).hasClass(m.SHOW);s.length&&t(s).toggleClass(m.COLLAPSED,!n).attr("aria-expanded",n)}static _getTargetFromElement(e){const t=l.getSelectorFromElement(e);return t?document.querySelector(t):null}static _jqueryInterface(s){return this.each(function(){const n=t(this);let i=n.data(o);const l=e.mixin({},h,n.data(),"object"==typeof s&&s?s:{});if(!i&&l.toggle&&/show|hide/.test(s)&&(l.toggle=!1),i||(i=new A(this,l),n.data(o,i)),"string"==typeof s){if(void 0===i[s])throw new TypeError(`No method named "${s}"`);i[s]()}})}}return t(document).on(d.CLICK_DATA_API,f.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();const s=t(this),n=l.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(n));t(i).each(function(){const e=t(this),n=e.data(o)?"toggle":s.data();A._jqueryInterface.call(e,n)})}),t.fn[r]=A._jqueryInterface,t.fn[r].Constructor=A,t.fn[r].noConflict=(()=>(t.fn[r]=c,A._jqueryInterface)),A});
//# sourceMappingURL=sourcemaps/collapse.js.map
