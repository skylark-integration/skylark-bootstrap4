{"version":3,"sources":["tab.js"],"names":["define","$","plugins","bs4","Util","VERSION","DATA_KEY","EVENT_KEY","jquery_NO_CONFLICT","fn","Event","HIDE","HIDDEN","SHOW","SHOWN","CLICK_DATA_API","ClassName","DROPDOWN_MENU","ACTIVE","DISABLED","FADE","Selector","DROPDOWN","NAV_LIST_GROUP","ACTIVE_UL","DATA_TOGGLE","DROPDOWN_TOGGLE","DROPDOWN_ACTIVE_CHILD","Tab","[object Object]","element","this","_element","parentNode","nodeType","Node","ELEMENT_NODE","hasClass","target","previous","listElement","closest","selector","getSelectorFromElement","itemSelector","nodeName","makeArray","find","length","hideEvent","relatedTarget","showEvent","trigger","isDefaultPrevented","document","querySelector","_activate","complete","hiddenEvent","shownEvent","removeData","container","callback","active","children","isTransitioning","_transitionComplete","transitionDuration","getTransitionDurationFromElement","removeClass","one","TRANSITION_END","emulateTransitionEnd","dropdownChild","getAttribute","setAttribute","addClass","reflow","dropdownElement","dropdownToggleList","slice","call","querySelectorAll","config","each","$this","data","TypeError","on","event","preventDefault","_jqueryInterface","Constructor","noConflict"],"mappings":"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","file":"../tab.js","sourcesContent":["define([\n    'skylark-utils-dom/query',\n    'skylark-utils-dom/plugins',\n    \"./bs4\",\n    './util'\n], function ($, plugins,bs4,Util) {\n\n    'use strict';\n    const NAME = 'tab';\n    const VERSION = '4.1.3';\n    const DATA_KEY = 'bs.tab';\n    const EVENT_KEY = `.${ DATA_KEY }`;\n    const DATA_API_KEY = '.data-api';\n    const jquery_NO_CONFLICT = $.fn[NAME];\n    const Event = {\n        HIDE: `hide${ EVENT_KEY }`,\n        HIDDEN: `hidden${ EVENT_KEY }`,\n        SHOW: `show${ EVENT_KEY }`,\n        SHOWN: `shown${ EVENT_KEY }`,\n        CLICK_DATA_API: `click${ EVENT_KEY }${ DATA_API_KEY }`\n    };\n    const ClassName = {\n        DROPDOWN_MENU: 'dropdown-menu',\n        ACTIVE: 'active',\n        DISABLED: 'disabled',\n        FADE: 'fade',\n        SHOW: 'show'\n    };\n    const Selector = {\n        DROPDOWN: '.dropdown',\n        NAV_LIST_GROUP: '.nav, .list-group',\n        ACTIVE: '.active',\n        ACTIVE_UL: '> li > .active',\n        DATA_TOGGLE: '[data-toggle=\"tab\"], [data-toggle=\"pill\"], [data-toggle=\"list\"]',\n        DROPDOWN_TOGGLE: '.dropdown-toggle',\n        DROPDOWN_ACTIVE_CHILD: '> .dropdown-menu .active'\n    };\n    class Tab {\n        constructor(element) {\n            this._element = element;\n        }\n        static get VERSION() {\n            return VERSION;\n        }\n        show() {\n            if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && $(this._element).hasClass(ClassName.ACTIVE) || $(this._element).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            let target;\n            let previous;\n            const listElement = $(this._element).closest(Selector.NAV_LIST_GROUP)[0];\n            const selector = Util.getSelectorFromElement(this._element);\n            if (listElement) {\n                const itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? Selector.ACTIVE_UL : Selector.ACTIVE;\n                previous = $.makeArray($(listElement).find(itemSelector));\n                previous = previous[previous.length - 1];\n            }\n            const hideEvent = $.Event(Event.HIDE, { relatedTarget: this._element });\n            const showEvent = $.Event(Event.SHOW, { relatedTarget: previous });\n            if (previous) {\n                $(previous).trigger(hideEvent);\n            }\n            $(this._element).trigger(showEvent);\n            if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) {\n                return;\n            }\n            if (selector) {\n                target = document.querySelector(selector);\n            }\n            this._activate(this._element, listElement);\n            const complete = () => {\n                const hiddenEvent = $.Event(Event.HIDDEN, { relatedTarget: this._element });\n                const shownEvent = $.Event(Event.SHOWN, { relatedTarget: previous });\n                $(previous).trigger(hiddenEvent);\n                $(this._element).trigger(shownEvent);\n            };\n            if (target) {\n                this._activate(target, target.parentNode, complete);\n            } else {\n                complete();\n            }\n        }\n        dispose() {\n            $.removeData(this._element, DATA_KEY);\n            this._element = null;\n        }\n        _activate(element, container, callback) {\n            const activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL') ? $(container).find(Selector.ACTIVE_UL) : $(container).children(Selector.ACTIVE);\n            const active = activeElements[0];\n            const isTransitioning = callback && (active && $(active).hasClass(ClassName.FADE));\n            const complete = () => this._transitionComplete(element, active, callback);\n            if (active && isTransitioning) {\n                const transitionDuration = Util.getTransitionDurationFromElement(active);\n                $(active).removeClass(ClassName.SHOW).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);\n            } else {\n                complete();\n            }\n        }\n        _transitionComplete(element, active, callback) {\n            if (active) {\n                $(active).removeClass(ClassName.ACTIVE);\n                const dropdownChild = $(active.parentNode).find(Selector.DROPDOWN_ACTIVE_CHILD)[0];\n                if (dropdownChild) {\n                    $(dropdownChild).removeClass(ClassName.ACTIVE);\n                }\n                if (active.getAttribute('role') === 'tab') {\n                    active.setAttribute('aria-selected', false);\n                }\n            }\n            $(element).addClass(ClassName.ACTIVE);\n            if (element.getAttribute('role') === 'tab') {\n                element.setAttribute('aria-selected', true);\n            }\n            Util.reflow(element);\n            $(element).addClass(ClassName.SHOW);\n            if (element.parentNode && $(element.parentNode).hasClass(ClassName.DROPDOWN_MENU)) {\n                const dropdownElement = $(element).closest(Selector.DROPDOWN)[0];\n                if (dropdownElement) {\n                    const dropdownToggleList = [].slice.call(dropdownElement.querySelectorAll(Selector.DROPDOWN_TOGGLE));\n                    $(dropdownToggleList).addClass(ClassName.ACTIVE);\n                }\n                element.setAttribute('aria-expanded', true);\n            }\n            if (callback) {\n                callback();\n            }\n        }\n        static _jqueryInterface(config) {\n            return this.each(function () {\n                const $this = $(this);\n                let data = $this.data(DATA_KEY);\n                if (!data) {\n                    data = new Tab(this);\n                    $this.data(DATA_KEY, data);\n                }\n                if (typeof config === 'string') {\n                    if (typeof data[config] === 'undefined') {\n                        throw new TypeError(`No method named \"${ config }\"`);\n                    }\n                    data[config]();\n                }\n            });\n        }\n    }\n    $(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n        event.preventDefault();\n        Tab._jqueryInterface.call($(this), 'show');\n    });\n    $.fn[NAME] = Tab._jqueryInterface;\n    $.fn[NAME].Constructor = Tab;\n    $.fn[NAME].noConflict = () => {\n        $.fn[NAME] = jquery_NO_CONFLICT;\n        return Tab._jqueryInterface;\n    };\n    return Tab;\n});"]}