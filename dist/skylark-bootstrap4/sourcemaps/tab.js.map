{"version":3,"sources":["tab.js"],"names":["define","langx","eventer","$","plugins","bs4","Util","VERSION","DATA_KEY","EVENT_KEY","jquery_NO_CONFLICT","fn","Event","HIDE","HIDDEN","SHOW","SHOWN","CLICK_DATA_API","ClassName","DROPDOWN_MENU","ACTIVE","DISABLED","FADE","Selector","DROPDOWN","NAV_LIST_GROUP","ACTIVE_UL","DATA_TOGGLE","DROPDOWN_TOGGLE","DROPDOWN_ACTIVE_CHILD","Tab","[object Object]","element","this","_element","parentNode","nodeType","Node","ELEMENT_NODE","hasClass","target","previous","listElement","closest","selector","getSelectorFromElement","itemSelector","nodeName","makeArray","find","length","hideEvent","create","relatedTarget","showEvent","trigger","isDefaultPrevented","document","querySelector","_activate","complete","hiddenEvent","shownEvent","removeData","container","callback","active","children","isTransitioning","_transitionComplete","transitionDuration","getTransitionDurationFromElement","removeClass","one","TRANSITION_END","emulateTransitionEnd","dropdownChild","getAttribute","setAttribute","addClass","reflow","dropdownElement","dropdownToggleList","slice","call","querySelectorAll","config","each","$this","data","TypeError","on","event","preventDefault","_jqueryInterface","Constructor","noConflict"],"mappings":"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","file":"../tab.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    'skylark-utils-dom/eventer',\n    'skylark-utils-dom/query',\n    'skylark-utils-dom/plugins',\n    \"./bs4\",\n    './util'\n], function (langx,eventer,$, plugins,bs4,Util) {\n\n    'use strict';\n    const NAME = 'tab';\n    const VERSION = '4.1.3';\n    const DATA_KEY = 'bs.tab';\n    const EVENT_KEY = `.${ DATA_KEY }`;\n    const DATA_API_KEY = '.data-api';\n    const jquery_NO_CONFLICT = $.fn[NAME];\n    const Event = {\n        HIDE: `hide${ EVENT_KEY }`,\n        HIDDEN: `hidden${ EVENT_KEY }`,\n        SHOW: `show${ EVENT_KEY }`,\n        SHOWN: `shown${ EVENT_KEY }`,\n        CLICK_DATA_API: `click${ EVENT_KEY }${ DATA_API_KEY }`\n    };\n    const ClassName = {\n        DROPDOWN_MENU: 'dropdown-menu',\n        ACTIVE: 'active',\n        DISABLED: 'disabled',\n        FADE: 'fade',\n        SHOW: 'show'\n    };\n    const Selector = {\n        DROPDOWN: '.dropdown',\n        NAV_LIST_GROUP: '.nav, .list-group',\n        ACTIVE: '.active',\n        ACTIVE_UL: '> li > .active',\n        DATA_TOGGLE: '[data-toggle=\"tab\"], [data-toggle=\"pill\"], [data-toggle=\"list\"]',\n        DROPDOWN_TOGGLE: '.dropdown-toggle',\n        DROPDOWN_ACTIVE_CHILD: '> .dropdown-menu .active'\n    };\n    class Tab {\n        constructor(element) {\n            this._element = element;\n        }\n        static get VERSION() {\n            return VERSION;\n        }\n        show() {\n            if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && $(this._element).hasClass(ClassName.ACTIVE) || $(this._element).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            let target;\n            let previous;\n            const listElement = $(this._element).closest(Selector.NAV_LIST_GROUP)[0];\n            const selector = Util.getSelectorFromElement(this._element);\n            if (listElement) {\n                const itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? Selector.ACTIVE_UL : Selector.ACTIVE;\n                previous = langx.makeArray($(listElement).find(itemSelector));\n                previous = previous[previous.length - 1];\n            }\n            const hideEvent = eventer.create(Event.HIDE, { relatedTarget: this._element });\n            const showEvent = eventer.create(Event.SHOW, { relatedTarget: previous });\n            if (previous) {\n                $(previous).trigger(hideEvent);\n            }\n            $(this._element).trigger(showEvent);\n            if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) {\n                return;\n            }\n            if (selector) {\n                target = document.querySelector(selector);\n            }\n            this._activate(this._element, listElement);\n            const complete = () => {\n                const hiddenEvent = eventer.create(Event.HIDDEN, { relatedTarget: this._element });\n                const shownEvent = eventer.create(Event.SHOWN, { relatedTarget: previous });\n                $(previous).trigger(hiddenEvent);\n                $(this._element).trigger(shownEvent);\n            };\n            if (target) {\n                this._activate(target, target.parentNode, complete);\n            } else {\n                complete();\n            }\n        }\n        dispose() {\n            $.removeData(this._element, DATA_KEY);\n            this._element = null;\n        }\n        _activate(element, container, callback) {\n            const activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL') ? $(container).find(Selector.ACTIVE_UL) : $(container).children(Selector.ACTIVE);\n            const active = activeElements[0];\n            const isTransitioning = callback && (active && $(active).hasClass(ClassName.FADE));\n            const complete = () => this._transitionComplete(element, active, callback);\n            if (active && isTransitioning) {\n                const transitionDuration = Util.getTransitionDurationFromElement(active);\n                $(active).removeClass(ClassName.SHOW).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);\n            } else {\n                complete();\n            }\n        }\n        _transitionComplete(element, active, callback) {\n            if (active) {\n                $(active).removeClass(ClassName.ACTIVE);\n                const dropdownChild = $(active.parentNode).find(Selector.DROPDOWN_ACTIVE_CHILD)[0];\n                if (dropdownChild) {\n                    $(dropdownChild).removeClass(ClassName.ACTIVE);\n                }\n                if (active.getAttribute('role') === 'tab') {\n                    active.setAttribute('aria-selected', false);\n                }\n            }\n            $(element).addClass(ClassName.ACTIVE);\n            if (element.getAttribute('role') === 'tab') {\n                element.setAttribute('aria-selected', true);\n            }\n            Util.reflow(element);\n            $(element).addClass(ClassName.SHOW);\n            if (element.parentNode && $(element.parentNode).hasClass(ClassName.DROPDOWN_MENU)) {\n                const dropdownElement = $(element).closest(Selector.DROPDOWN)[0];\n                if (dropdownElement) {\n                    const dropdownToggleList = [].slice.call(dropdownElement.querySelectorAll(Selector.DROPDOWN_TOGGLE));\n                    $(dropdownToggleList).addClass(ClassName.ACTIVE);\n                }\n                element.setAttribute('aria-expanded', true);\n            }\n            if (callback) {\n                callback();\n            }\n        }\n        static _jqueryInterface(config) {\n            return this.each(function () {\n                const $this = $(this);\n                let data = $this.data(DATA_KEY);\n                if (!data) {\n                    data = new Tab(this);\n                    $this.data(DATA_KEY, data);\n                }\n                if (typeof config === 'string') {\n                    if (typeof data[config] === 'undefined') {\n                        throw new TypeError(`No method named \"${ config }\"`);\n                    }\n                    data[config]();\n                }\n            });\n        }\n    }\n    $(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n        event.preventDefault();\n        Tab._jqueryInterface.call($(this), 'show');\n    });\n    $.fn[NAME] = Tab._jqueryInterface;\n    $.fn[NAME].Constructor = Tab;\n    $.fn[NAME].noConflict = () => {\n        $.fn[NAME] = jquery_NO_CONFLICT;\n        return Tab._jqueryInterface;\n    };\n    return Tab;\n});"]}