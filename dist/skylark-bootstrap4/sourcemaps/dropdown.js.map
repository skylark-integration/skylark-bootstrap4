{"version":3,"sources":["dropdown.js"],"names":["define","langx","$","eventer","plugins","bs4","Popper","Util","NAME","VERSION","DATA_KEY","EVENT_KEY","jquery_NO_CONFLICT","fn","ESCAPE_KEYCODE","SPACE_KEYCODE","TAB_KEYCODE","ARROW_UP_KEYCODE","ARROW_DOWN_KEYCODE","RIGHT_MOUSE_BUTTON_WHICH","REGEXP_KEYDOWN","RegExp","Event","HIDE","HIDDEN","SHOW","SHOWN","CLICK","CLICK_DATA_API","KEYDOWN_DATA_API","KEYUP_DATA_API","ClassName","DISABLED","DROPUP","DROPRIGHT","DROPLEFT","MENURIGHT","MENULEFT","POSITION_STATIC","Selector","DATA_TOGGLE","FORM_CHILD","MENU","NAVBAR_NAV","VISIBLE_ITEMS","AttachmentMap","TOP","TOPEND","BOTTOM","BOTTOMEND","RIGHT","RIGHTEND","LEFT","LEFTEND","Default","offset","flip","boundary","reference","display","DefaultType","Dropdown","[object Object]","element","config","this","_element","_popper","_config","_getConfig","_menu","_getMenuElement","_inNavbar","_detectNavbar","_addEventListeners","disabled","hasClass","parent","_getParentFromElement","isActive","_clearMenus","relatedTarget","showEvent","create","trigger","isDefaultPrevented","TypeError","referenceElement","isElement","skylark","utils","dom","query","addClass","_getPopperConfig","document","documentElement","closest","length","body","children","on","noop","focus","setAttribute","toggleClass","hideEvent","removeData","off","destroy","scheduleUpdate","event","preventDefault","stopPropagation","toggle","mixin","constructor","data","typeCheckConfig","querySelector","$parentDropdown","parentNode","placement","offsetConf","offsets","popperConfig","_getPlacement","modifiers","enabled","preventOverflow","boundariesElement","applyStyle","each","which","type","toggles","slice","call","querySelectorAll","i","len","context","clickEvent","dropdownMenu","test","target","tagName","contains","removeClass","selector","getSelectorFromElement","items","index","indexOf","_dataApiKeydownHandler","_jqueryInterface","e","Constructor","noConflict"],"mappings":"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","file":"../dropdown.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    'skylark-utils-dom/query',\n    'skylark-utils-dom/eventer',\n    'skylark-utils-dom/plugins',\n    \"./bs4\",\n    'skylark-ui-popper/Popper',\n    './util'\n], function (langx,$, eventer,plugins,bs4,Popper,Util) {\n    'use strict';\n    const NAME = 'dropdown';\n    const VERSION = '4.1.3';\n    const DATA_KEY = 'bs.dropdown';\n    const EVENT_KEY = `.${ DATA_KEY }`;\n    const DATA_API_KEY = '.data-api';\n    const jquery_NO_CONFLICT = $.fn[NAME];\n    const ESCAPE_KEYCODE = 27;\n    const SPACE_KEYCODE = 32;\n    const TAB_KEYCODE = 9;\n    const ARROW_UP_KEYCODE = 38;\n    const ARROW_DOWN_KEYCODE = 40;\n    const RIGHT_MOUSE_BUTTON_WHICH = 3;\n    const REGEXP_KEYDOWN = new RegExp(`${ ARROW_UP_KEYCODE }|${ ARROW_DOWN_KEYCODE }|${ ESCAPE_KEYCODE }`);\n    const Event = {\n        HIDE: `hide${ EVENT_KEY }`,\n        HIDDEN: `hidden${ EVENT_KEY }`,\n        SHOW: `show${ EVENT_KEY }`,\n        SHOWN: `shown${ EVENT_KEY }`,\n        CLICK: `click${ EVENT_KEY }`,\n        CLICK_DATA_API: `click${ EVENT_KEY }${ DATA_API_KEY }`,\n        KEYDOWN_DATA_API: `keydown${ EVENT_KEY }${ DATA_API_KEY }`,\n        KEYUP_DATA_API: `keyup${ EVENT_KEY }${ DATA_API_KEY }`\n    };\n    const ClassName = {\n        DISABLED: 'disabled',\n        SHOW: 'show',\n        DROPUP: 'dropup',\n        DROPRIGHT: 'dropright',\n        DROPLEFT: 'dropleft',\n        MENURIGHT: 'dropdown-menu-right',\n        MENULEFT: 'dropdown-menu-left',\n        POSITION_STATIC: 'position-static'\n    };\n    const Selector = {\n        DATA_TOGGLE: '[data-toggle=\"dropdown\"]',\n        FORM_CHILD: '.dropdown form',\n        MENU: '.dropdown-menu',\n        NAVBAR_NAV: '.navbar-nav',\n        VISIBLE_ITEMS: '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n    };\n    const AttachmentMap = {\n        TOP: 'top-start',\n        TOPEND: 'top-end',\n        BOTTOM: 'bottom-start',\n        BOTTOMEND: 'bottom-end',\n        RIGHT: 'right-start',\n        RIGHTEND: 'right-end',\n        LEFT: 'left-start',\n        LEFTEND: 'left-end'\n    };\n    const Default = {\n        offset: 0,\n        flip: true,\n        boundary: 'scrollParent',\n        reference: 'toggle',\n        display: 'dynamic'\n    };\n    const DefaultType = {\n        offset: '(number|string|function)',\n        flip: 'boolean',\n        boundary: '(string|element)',\n        reference: '(string|element)',\n        display: 'string'\n    };\n    class Dropdown {\n        constructor(element, config) {\n            this._element = element;\n            this._popper = null;\n            this._config = this._getConfig(config);\n            this._menu = this._getMenuElement();\n            this._inNavbar = this._detectNavbar();\n            this._addEventListeners();\n        }\n        static get VERSION() {\n            return VERSION;\n        }\n        static get Default() {\n            return Default;\n        }\n        static get DefaultType() {\n            return DefaultType;\n        }\n        toggle() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            const parent = Dropdown._getParentFromElement(this._element);\n            const isActive = $(this._menu).hasClass(ClassName.SHOW);\n            Dropdown._clearMenus();\n            if (isActive) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const showEvent = eventer.create(Event.SHOW, relatedTarget);\n            $(parent).trigger(showEvent);\n            if (showEvent.isDefaultPrevented()) {\n                return;\n            }\n            if (!this._inNavbar) {\n                if (typeof Popper === 'undefined') {\n                    throw new TypeError(\"Bootstrap's dropdowns require skylark-ui-popper/Popper (https://skylark-ui-popper/Popper.org/)\");\n                }\n                let referenceElement = this._element;\n                if (this._config.reference === 'parent') {\n                    referenceElement = parent;\n                } else if (Util.isElement(this._config.reference)) {\n                    referenceElement = this._config.reference;\n                    if (typeof this._config.reference.skylark-utils-dom/query !== 'undefined') {\n                        referenceElement = this._config.reference[0];\n                    }\n                }\n                if (this._config.boundary !== 'scrollParent') {\n                    $(parent).addClass(ClassName.POSITION_STATIC);\n                }\n                this._popper = new Popper(referenceElement, this._menu, this._getPopperConfig());\n            }\n            if ('ontouchstart' in document.documentElement && $(parent).closest(Selector.NAVBAR_NAV).length === 0) {\n                $(document.body).children().on('mouseover', null, $.noop);\n            }\n            this._element.focus();\n            this._element.setAttribute('aria-expanded', true);\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger(eventer.create(Event.SHOWN, relatedTarget));\n        }\n        show() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || $(this._menu).hasClass(ClassName.SHOW)) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const showEvent = eventer.create(Event.SHOW, relatedTarget);\n            const parent = Dropdown._getParentFromElement(this._element);\n            $(parent).trigger(showEvent);\n            if (showEvent.isDefaultPrevented()) {\n                return;\n            }\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger(eventer.create(Event.SHOWN, relatedTarget));\n        }\n        hide() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || !$(this._menu).hasClass(ClassName.SHOW)) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const hideEvent = eventer.create(Event.HIDE, relatedTarget);\n            const parent = Dropdown._getParentFromElement(this._element);\n            $(parent).trigger(hideEvent);\n            if (hideEvent.isDefaultPrevented()) {\n                return;\n            }\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger(eventer.create(Event.HIDDEN, relatedTarget));\n        }\n        dispose() {\n            $.removeData(this._element, DATA_KEY);\n            $(this._element).off(EVENT_KEY);\n            this._element = null;\n            this._menu = null;\n            if (this._popper !== null) {\n                this._popper.destroy();\n                this._popper = null;\n            }\n        }\n        update() {\n            this._inNavbar = this._detectNavbar();\n            if (this._popper !== null) {\n                this._popper.scheduleUpdate();\n            }\n        }\n        _addEventListeners() {\n            $(this._element).on(Event.CLICK, event => {\n                event.preventDefault();\n                event.stopPropagation();\n                this.toggle();\n            });\n        }\n        _getConfig(config) {\n            //config = {\n            //    ...this.constructor.Default,\n            //    ...$(this._element).data(),\n            //    ...config\n            //};\n            config = langx.mixin({},this.constructor.Default,$(this._element).data(),config);\n            Util.typeCheckConfig(NAME, config, this.constructor.DefaultType);\n            return config;\n        }\n        _getMenuElement() {\n            if (!this._menu) {\n                const parent = Dropdown._getParentFromElement(this._element);\n                if (parent) {\n                    this._menu = parent.querySelector(Selector.MENU);\n                }\n            }\n            return this._menu;\n        }\n        _getPlacement() {\n            const $parentDropdown = $(this._element.parentNode);\n            let placement = AttachmentMap.BOTTOM;\n            if ($parentDropdown.hasClass(ClassName.DROPUP)) {\n                placement = AttachmentMap.TOP;\n                if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n                    placement = AttachmentMap.TOPEND;\n                }\n            } else if ($parentDropdown.hasClass(ClassName.DROPRIGHT)) {\n                placement = AttachmentMap.RIGHT;\n            } else if ($parentDropdown.hasClass(ClassName.DROPLEFT)) {\n                placement = AttachmentMap.LEFT;\n            } else if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n                placement = AttachmentMap.BOTTOMEND;\n            }\n            return placement;\n        }\n        _detectNavbar() {\n            return $(this._element).closest('.navbar').length > 0;\n        }\n        _getPopperConfig() {\n            const offsetConf = {};\n            if (typeof this._config.offset === 'function') {\n                offsetConf.fn = data => {\n                    //data.offsets = {\n                    //    ...data.offsets,\n                    //    ...this._config.offset(data.offsets) || {}\n                    //};\n                    langx.mixin(data.offsets,this._config.offset(data.offsets) || {});\n                    return data;\n                };\n            } else {\n                offsetConf.offset = this._config.offset;\n            }\n            const popperConfig = {\n                placement: this._getPlacement(),\n                modifiers: {\n                    offset: offsetConf,\n                    flip: { enabled: this._config.flip },\n                    preventOverflow: { boundariesElement: this._config.boundary }\n                }\n            };\n            if (this._config.display === 'static') {\n                popperConfig.modifiers.applyStyle = { enabled: false };\n            }\n            return popperConfig;\n        }\n        static _jqueryInterface(config) {\n            return this.each(function () {\n                let data = $(this).data(DATA_KEY);\n                const _config = typeof config === 'object' ? config : null;\n                if (!data) {\n                    data = new Dropdown(this, _config);\n                    $(this).data(DATA_KEY, data);\n                }\n                if (typeof config === 'string') {\n                    if (typeof data[config] === 'undefined') {\n                        throw new TypeError(`No method named \"${ config }\"`);\n                    }\n                    data[config]();\n                }\n            });\n        }\n        static _clearMenus(event) {\n            if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH || event.type === 'keyup' && event.which !== TAB_KEYCODE)) {\n                return;\n            }\n            const toggles = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE));\n            for (let i = 0, len = toggles.length; i < len; i++) {\n                const parent = Dropdown._getParentFromElement(toggles[i]);\n                const context = $(toggles[i]).data(DATA_KEY);\n                const relatedTarget = { relatedTarget: toggles[i] };\n                if (event && event.type === 'click') {\n                    relatedTarget.clickEvent = event;\n                }\n                if (!context) {\n                    continue;\n                }\n                const dropdownMenu = context._menu;\n                if (!$(parent).hasClass(ClassName.SHOW)) {\n                    continue;\n                }\n                if (event && (event.type === 'click' && /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) && $.contains(parent, event.target)) {\n                    continue;\n                }\n                const hideEvent = eventer.create(Event.HIDE, relatedTarget);\n                $(parent).trigger(hideEvent);\n                if (hideEvent.isDefaultPrevented()) {\n                    continue;\n                }\n                if ('ontouchstart' in document.documentElement) {\n                    $(document.body).children().off('mouseover', null, $.noop);\n                }\n                toggles[i].setAttribute('aria-expanded', 'false');\n                $(dropdownMenu).removeClass(ClassName.SHOW);\n                $(parent).removeClass(ClassName.SHOW).trigger(eventer.create(Event.HIDDEN, relatedTarget));\n            }\n        }\n        static _getParentFromElement(element) {\n            let parent;\n            const selector = Util.getSelectorFromElement(element);\n            if (selector) {\n                parent = document.querySelector(selector);\n            }\n            return parent || element.parentNode;\n        }\n        static _dataApiKeydownHandler(event) {\n            if (/input|textarea/i.test(event.target.tagName) ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE && (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE || $(event.target).closest(Selector.MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {\n                return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            if (this.disabled || $(this).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            const parent = Dropdown._getParentFromElement(this);\n            const isActive = $(parent).hasClass(ClassName.SHOW);\n            if (!isActive || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {\n                if (event.which === ESCAPE_KEYCODE) {\n                    const toggle = parent.querySelector(Selector.DATA_TOGGLE);\n                    $(toggle).trigger('focus');\n                }\n                $(this).trigger('click');\n                return;\n            }\n            const items = [].slice.call(parent.querySelectorAll(Selector.VISIBLE_ITEMS));\n            if (items.length === 0) {\n                return;\n            }\n            let index = items.indexOf(event.target);\n            if (event.which === ARROW_UP_KEYCODE && index > 0) {\n                index--;\n            }\n            if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) {\n                index++;\n            }\n            if (index < 0) {\n                index = 0;\n            }\n            items[index].focus();\n        }\n    }\n    $(document).on(Event.KEYDOWN_DATA_API, Selector.DATA_TOGGLE, Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API, Selector.MENU, Dropdown._dataApiKeydownHandler).on(`${ Event.CLICK_DATA_API } ${ Event.KEYUP_DATA_API }`, Dropdown._clearMenus).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        Dropdown._jqueryInterface.call($(this), 'toggle');\n    }).on(Event.CLICK_DATA_API, Selector.FORM_CHILD, e => {\n        e.stopPropagation();\n    });\n    $.fn[NAME] = Dropdown._jqueryInterface;\n    $.fn[NAME].Constructor = Dropdown;\n    $.fn[NAME].noConflict = () => {\n        $.fn[NAME] = jquery_NO_CONFLICT;\n        return Dropdown._jqueryInterface;\n    };\n    return Dropdown;\n});"]}