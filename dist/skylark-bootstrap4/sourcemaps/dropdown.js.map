{"version":3,"sources":["dropdown.js"],"names":["define","langx","$","plugins","bs4","Popper","Util","NAME","VERSION","DATA_KEY","EVENT_KEY","jquery_NO_CONFLICT","fn","ESCAPE_KEYCODE","SPACE_KEYCODE","TAB_KEYCODE","ARROW_UP_KEYCODE","ARROW_DOWN_KEYCODE","RIGHT_MOUSE_BUTTON_WHICH","REGEXP_KEYDOWN","RegExp","Event","HIDE","HIDDEN","SHOW","SHOWN","CLICK","CLICK_DATA_API","KEYDOWN_DATA_API","KEYUP_DATA_API","ClassName","DISABLED","DROPUP","DROPRIGHT","DROPLEFT","MENURIGHT","MENULEFT","POSITION_STATIC","Selector","DATA_TOGGLE","FORM_CHILD","MENU","NAVBAR_NAV","VISIBLE_ITEMS","AttachmentMap","TOP","TOPEND","BOTTOM","BOTTOMEND","RIGHT","RIGHTEND","LEFT","LEFTEND","Default","offset","flip","boundary","reference","display","DefaultType","Dropdown","[object Object]","element","config","this","_element","_popper","_config","_getConfig","_menu","_getMenuElement","_inNavbar","_detectNavbar","_addEventListeners","disabled","hasClass","parent","_getParentFromElement","isActive","_clearMenus","relatedTarget","showEvent","trigger","isDefaultPrevented","TypeError","referenceElement","isElement","skylark","utils","dom","query","addClass","_getPopperConfig","document","documentElement","closest","length","body","children","on","noop","focus","setAttribute","toggleClass","hideEvent","removeData","off","destroy","scheduleUpdate","event","preventDefault","stopPropagation","toggle","mixin","constructor","data","typeCheckConfig","querySelector","$parentDropdown","parentNode","placement","offsetConf","offsets","popperConfig","_getPlacement","modifiers","enabled","preventOverflow","boundariesElement","applyStyle","each","which","type","toggles","slice","call","querySelectorAll","i","len","context","clickEvent","dropdownMenu","test","target","tagName","contains","removeClass","selector","getSelectorFromElement","items","index","indexOf","_dataApiKeydownHandler","_jqueryInterface","e","Constructor","noConflict"],"mappings":"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","file":"../dropdown.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    'skylark-utils-dom/query',\n    'skylark-utils-dom/plugins',\n    \"./bs4\",\n    'skylark-ui-popper/Popper',\n    './util'\n], function (langx,$, plugins,bs4,Popper,Util) {\n    'use strict';\n    const NAME = 'dropdown';\n    const VERSION = '4.1.3';\n    const DATA_KEY = 'bs.dropdown';\n    const EVENT_KEY = `.${ DATA_KEY }`;\n    const DATA_API_KEY = '.data-api';\n    const jquery_NO_CONFLICT = $.fn[NAME];\n    const ESCAPE_KEYCODE = 27;\n    const SPACE_KEYCODE = 32;\n    const TAB_KEYCODE = 9;\n    const ARROW_UP_KEYCODE = 38;\n    const ARROW_DOWN_KEYCODE = 40;\n    const RIGHT_MOUSE_BUTTON_WHICH = 3;\n    const REGEXP_KEYDOWN = new RegExp(`${ ARROW_UP_KEYCODE }|${ ARROW_DOWN_KEYCODE }|${ ESCAPE_KEYCODE }`);\n    const Event = {\n        HIDE: `hide${ EVENT_KEY }`,\n        HIDDEN: `hidden${ EVENT_KEY }`,\n        SHOW: `show${ EVENT_KEY }`,\n        SHOWN: `shown${ EVENT_KEY }`,\n        CLICK: `click${ EVENT_KEY }`,\n        CLICK_DATA_API: `click${ EVENT_KEY }${ DATA_API_KEY }`,\n        KEYDOWN_DATA_API: `keydown${ EVENT_KEY }${ DATA_API_KEY }`,\n        KEYUP_DATA_API: `keyup${ EVENT_KEY }${ DATA_API_KEY }`\n    };\n    const ClassName = {\n        DISABLED: 'disabled',\n        SHOW: 'show',\n        DROPUP: 'dropup',\n        DROPRIGHT: 'dropright',\n        DROPLEFT: 'dropleft',\n        MENURIGHT: 'dropdown-menu-right',\n        MENULEFT: 'dropdown-menu-left',\n        POSITION_STATIC: 'position-static'\n    };\n    const Selector = {\n        DATA_TOGGLE: '[data-toggle=\"dropdown\"]',\n        FORM_CHILD: '.dropdown form',\n        MENU: '.dropdown-menu',\n        NAVBAR_NAV: '.navbar-nav',\n        VISIBLE_ITEMS: '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n    };\n    const AttachmentMap = {\n        TOP: 'top-start',\n        TOPEND: 'top-end',\n        BOTTOM: 'bottom-start',\n        BOTTOMEND: 'bottom-end',\n        RIGHT: 'right-start',\n        RIGHTEND: 'right-end',\n        LEFT: 'left-start',\n        LEFTEND: 'left-end'\n    };\n    const Default = {\n        offset: 0,\n        flip: true,\n        boundary: 'scrollParent',\n        reference: 'toggle',\n        display: 'dynamic'\n    };\n    const DefaultType = {\n        offset: '(number|string|function)',\n        flip: 'boolean',\n        boundary: '(string|element)',\n        reference: '(string|element)',\n        display: 'string'\n    };\n    class Dropdown {\n        constructor(element, config) {\n            this._element = element;\n            this._popper = null;\n            this._config = this._getConfig(config);\n            this._menu = this._getMenuElement();\n            this._inNavbar = this._detectNavbar();\n            this._addEventListeners();\n        }\n        static get VERSION() {\n            return VERSION;\n        }\n        static get Default() {\n            return Default;\n        }\n        static get DefaultType() {\n            return DefaultType;\n        }\n        toggle() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            const parent = Dropdown._getParentFromElement(this._element);\n            const isActive = $(this._menu).hasClass(ClassName.SHOW);\n            Dropdown._clearMenus();\n            if (isActive) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const showEvent = $.Event(Event.SHOW, relatedTarget);\n            $(parent).trigger(showEvent);\n            if (showEvent.isDefaultPrevented()) {\n                return;\n            }\n            if (!this._inNavbar) {\n                if (typeof Popper === 'undefined') {\n                    throw new TypeError(\"Bootstrap's dropdowns require skylark-ui-popper/Popper (https://skylark-ui-popper/Popper.org/)\");\n                }\n                let referenceElement = this._element;\n                if (this._config.reference === 'parent') {\n                    referenceElement = parent;\n                } else if (Util.isElement(this._config.reference)) {\n                    referenceElement = this._config.reference;\n                    if (typeof this._config.reference.skylark-utils-dom/query !== 'undefined') {\n                        referenceElement = this._config.reference[0];\n                    }\n                }\n                if (this._config.boundary !== 'scrollParent') {\n                    $(parent).addClass(ClassName.POSITION_STATIC);\n                }\n                this._popper = new Popper(referenceElement, this._menu, this._getPopperConfig());\n            }\n            if ('ontouchstart' in document.documentElement && $(parent).closest(Selector.NAVBAR_NAV).length === 0) {\n                $(document.body).children().on('mouseover', null, $.noop);\n            }\n            this._element.focus();\n            this._element.setAttribute('aria-expanded', true);\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger($.Event(Event.SHOWN, relatedTarget));\n        }\n        show() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || $(this._menu).hasClass(ClassName.SHOW)) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const showEvent = $.Event(Event.SHOW, relatedTarget);\n            const parent = Dropdown._getParentFromElement(this._element);\n            $(parent).trigger(showEvent);\n            if (showEvent.isDefaultPrevented()) {\n                return;\n            }\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger($.Event(Event.SHOWN, relatedTarget));\n        }\n        hide() {\n            if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || !$(this._menu).hasClass(ClassName.SHOW)) {\n                return;\n            }\n            const relatedTarget = { relatedTarget: this._element };\n            const hideEvent = $.Event(Event.HIDE, relatedTarget);\n            const parent = Dropdown._getParentFromElement(this._element);\n            $(parent).trigger(hideEvent);\n            if (hideEvent.isDefaultPrevented()) {\n                return;\n            }\n            $(this._menu).toggleClass(ClassName.SHOW);\n            $(parent).toggleClass(ClassName.SHOW).trigger($.Event(Event.HIDDEN, relatedTarget));\n        }\n        dispose() {\n            $.removeData(this._element, DATA_KEY);\n            $(this._element).off(EVENT_KEY);\n            this._element = null;\n            this._menu = null;\n            if (this._popper !== null) {\n                this._popper.destroy();\n                this._popper = null;\n            }\n        }\n        update() {\n            this._inNavbar = this._detectNavbar();\n            if (this._popper !== null) {\n                this._popper.scheduleUpdate();\n            }\n        }\n        _addEventListeners() {\n            $(this._element).on(Event.CLICK, event => {\n                event.preventDefault();\n                event.stopPropagation();\n                this.toggle();\n            });\n        }\n        _getConfig(config) {\n            //config = {\n            //    ...this.constructor.Default,\n            //    ...$(this._element).data(),\n            //    ...config\n            //};\n            config = langx.mixin({},this.constructor.Default,$(this._element).data(),config);\n            Util.typeCheckConfig(NAME, config, this.constructor.DefaultType);\n            return config;\n        }\n        _getMenuElement() {\n            if (!this._menu) {\n                const parent = Dropdown._getParentFromElement(this._element);\n                if (parent) {\n                    this._menu = parent.querySelector(Selector.MENU);\n                }\n            }\n            return this._menu;\n        }\n        _getPlacement() {\n            const $parentDropdown = $(this._element.parentNode);\n            let placement = AttachmentMap.BOTTOM;\n            if ($parentDropdown.hasClass(ClassName.DROPUP)) {\n                placement = AttachmentMap.TOP;\n                if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n                    placement = AttachmentMap.TOPEND;\n                }\n            } else if ($parentDropdown.hasClass(ClassName.DROPRIGHT)) {\n                placement = AttachmentMap.RIGHT;\n            } else if ($parentDropdown.hasClass(ClassName.DROPLEFT)) {\n                placement = AttachmentMap.LEFT;\n            } else if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n                placement = AttachmentMap.BOTTOMEND;\n            }\n            return placement;\n        }\n        _detectNavbar() {\n            return $(this._element).closest('.navbar').length > 0;\n        }\n        _getPopperConfig() {\n            const offsetConf = {};\n            if (typeof this._config.offset === 'function') {\n                offsetConf.fn = data => {\n                    //data.offsets = {\n                    //    ...data.offsets,\n                    //    ...this._config.offset(data.offsets) || {}\n                    //};\n                    langx.mixin(data.offsets,this._config.offset(data.offsets) || {});\n                    return data;\n                };\n            } else {\n                offsetConf.offset = this._config.offset;\n            }\n            const popperConfig = {\n                placement: this._getPlacement(),\n                modifiers: {\n                    offset: offsetConf,\n                    flip: { enabled: this._config.flip },\n                    preventOverflow: { boundariesElement: this._config.boundary }\n                }\n            };\n            if (this._config.display === 'static') {\n                popperConfig.modifiers.applyStyle = { enabled: false };\n            }\n            return popperConfig;\n        }\n        static _jqueryInterface(config) {\n            return this.each(function () {\n                let data = $(this).data(DATA_KEY);\n                const _config = typeof config === 'object' ? config : null;\n                if (!data) {\n                    data = new Dropdown(this, _config);\n                    $(this).data(DATA_KEY, data);\n                }\n                if (typeof config === 'string') {\n                    if (typeof data[config] === 'undefined') {\n                        throw new TypeError(`No method named \"${ config }\"`);\n                    }\n                    data[config]();\n                }\n            });\n        }\n        static _clearMenus(event) {\n            if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH || event.type === 'keyup' && event.which !== TAB_KEYCODE)) {\n                return;\n            }\n            const toggles = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE));\n            for (let i = 0, len = toggles.length; i < len; i++) {\n                const parent = Dropdown._getParentFromElement(toggles[i]);\n                const context = $(toggles[i]).data(DATA_KEY);\n                const relatedTarget = { relatedTarget: toggles[i] };\n                if (event && event.type === 'click') {\n                    relatedTarget.clickEvent = event;\n                }\n                if (!context) {\n                    continue;\n                }\n                const dropdownMenu = context._menu;\n                if (!$(parent).hasClass(ClassName.SHOW)) {\n                    continue;\n                }\n                if (event && (event.type === 'click' && /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) && $.contains(parent, event.target)) {\n                    continue;\n                }\n                const hideEvent = $.Event(Event.HIDE, relatedTarget);\n                $(parent).trigger(hideEvent);\n                if (hideEvent.isDefaultPrevented()) {\n                    continue;\n                }\n                if ('ontouchstart' in document.documentElement) {\n                    $(document.body).children().off('mouseover', null, $.noop);\n                }\n                toggles[i].setAttribute('aria-expanded', 'false');\n                $(dropdownMenu).removeClass(ClassName.SHOW);\n                $(parent).removeClass(ClassName.SHOW).trigger($.Event(Event.HIDDEN, relatedTarget));\n            }\n        }\n        static _getParentFromElement(element) {\n            let parent;\n            const selector = Util.getSelectorFromElement(element);\n            if (selector) {\n                parent = document.querySelector(selector);\n            }\n            return parent || element.parentNode;\n        }\n        static _dataApiKeydownHandler(event) {\n            if (/input|textarea/i.test(event.target.tagName) ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE && (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE || $(event.target).closest(Selector.MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {\n                return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            if (this.disabled || $(this).hasClass(ClassName.DISABLED)) {\n                return;\n            }\n            const parent = Dropdown._getParentFromElement(this);\n            const isActive = $(parent).hasClass(ClassName.SHOW);\n            if (!isActive || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {\n                if (event.which === ESCAPE_KEYCODE) {\n                    const toggle = parent.querySelector(Selector.DATA_TOGGLE);\n                    $(toggle).trigger('focus');\n                }\n                $(this).trigger('click');\n                return;\n            }\n            const items = [].slice.call(parent.querySelectorAll(Selector.VISIBLE_ITEMS));\n            if (items.length === 0) {\n                return;\n            }\n            let index = items.indexOf(event.target);\n            if (event.which === ARROW_UP_KEYCODE && index > 0) {\n                index--;\n            }\n            if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) {\n                index++;\n            }\n            if (index < 0) {\n                index = 0;\n            }\n            items[index].focus();\n        }\n    }\n    $(document).on(Event.KEYDOWN_DATA_API, Selector.DATA_TOGGLE, Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API, Selector.MENU, Dropdown._dataApiKeydownHandler).on(`${ Event.CLICK_DATA_API } ${ Event.KEYUP_DATA_API }`, Dropdown._clearMenus).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        Dropdown._jqueryInterface.call($(this), 'toggle');\n    }).on(Event.CLICK_DATA_API, Selector.FORM_CHILD, e => {\n        e.stopPropagation();\n    });\n    $.fn[NAME] = Dropdown._jqueryInterface;\n    $.fn[NAME].Constructor = Dropdown;\n    $.fn[NAME].noConflict = () => {\n        $.fn[NAME] = jquery_NO_CONFLICT;\n        return Dropdown._jqueryInterface;\n    };\n    return Dropdown;\n});"]}